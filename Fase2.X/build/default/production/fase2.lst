MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;**********
                      00002 ;CAPÇALERES   
                      00003 ;**********
Warning[215]: Processor superseded by command line.  Verify processor symbol.
                      00004     LIST P=PIC18F4321 F=INHX32
                      00005     #include <p18f4321.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Oct 24 2019
                      00005 ;  MPASM PIC18F4321 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      01455         LIST
                      00006 
                      00007     ;**************
                      00008     ;CONFIGURACIONS 
                      00009     ;**************
                      00010     CONFIG OSC = HSPLL    ; 40MHz
                      00011     CONFIG PBADEN = DIG   ; PORTB
                      00012     CONFIG WDT = OFF 
                      00013 
                      00014 ;**********
                      00015 ;VARIABLES
                      00016 ;**********
  00000001            00017 FLAGS EQU 0x0001 ;Flags per avisar a les interrupcions
  00000002            00018 NUM_NOTES EQU 0x0002
  00000003            00019 LECTURA EQU 0x0003
  00000004            00020 COMPT_ESPERA_ACK EQU 0x0004;Comptador per generar ACK
  00000005            00021 NOTA_LLEGIDA EQU 0x0005
  00000006            00022 DURATION_LLEGIDA EQU 0x0006
  00000007            00023 COMPTADOR_3S_L EQU 0x0007
  00000008            00024 COMPTADOR_3S_H EQU 0x0008
  00000009            00025 FLAGS_INT EQU 0x0009 ;Flgs que venen de les interrupcions
  0000000A            00026 COMPTADOR_500MS_L EQU 0x000A
  0000000B            00027 COMPTADOR_500MS_H EQU 0x000B
  0000000C            00028 COMPT_ESPERA_TRIGGER EQU 0x000C ;Comptador per generar trigger
  0000000D            00029 COMPTADOR_2S_H EQU 0x000D
  0000000E            00030 COMPTADOR_2S_L EQU 0x000E
  0000000F            00031 COMPTADOR_1S_H EQU 0x000F
  00000010            00032 COMPTADOR_1S_L EQU 0x0010
                      00033     ;******************************
                      00034     ;VECTORS DE RESET I INTERRUPCIÓ 
                      00035     ;******************************
                      00036     ORG 0x000
000000 EF?? F???      00037     GOTO MAIN
                      00038     ORG 0X0008
000008 EF?? F???      00039     GOTO HIGH_RSI
                      00040     ORG 0X0018
000018 0011           00041     RETFIE FAST
                      00042 
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00043 
                      00044 ;**********************
                      00045 ;CONFIGURACIÓ DE PORTS  
                      00046 ;**********************
00001A                00047 CONFIG_PORTS
                      00048     ;PORT A -> Pins analògics: RA0, RA1, RA2, RA3, RA5; Pins d'oscil·lador: RA6, RA7
00001A 9092           00049     BCF TRISA,0,0   ; Sortida  --  Length_0 (Led)
00001C 9292           00050     BCF TRISA,1,0   ; Sortida  --  Length_1 (Led)
00001E 9692           00051     BCF TRISA,3,0   ; Sortida  --  Answer Correct (Led RA3)
000020 9892           00052     BCF TRISA,4,0   ; Sortida  --  Answer Incorrect (Led RA4)
                      00053     
000022 9492           00054     BCF TRISA,2,0   ; Sortida  --  Trigger (Ultrasons)
000024 9A92           00055     BCF TRISA,5,0   ; Sortida  --  GameScore (Servo)
                      00056     ;Pins RA6, RA7 no s'utilitzen per HSPLL
                      00057     
                      00058     ;PORT B - Entrades -> Pins d'interrupció: RB0, RB1, RB2 ; Pins analògics: RB0, RB1, RB2, RB3, RB4
000026 8093           00059     BSF TRISB,0,0   ; Entrada --  NewNote (Ve de la F1)
000028 8293           00060     BSF TRISB,1,0   ; Entrada --  StartGame (Ve de la F1)
00002A 8493           00061     BSF TRISB,2,0   ; Entrada --  Echo (Ultrasons)
                      00062     
                      00063     ;PORT C
00002C 8094           00064     BSF TRISC,0,0   ; Entrada - Note_0 (ve de la F1)
00002E 8294           00065     BSF TRISC,1,0   ; Entrada - Note_1 (ve de la F1)
000030 8494           00066     BSF TRISC,2,0   ; Entrada - Note_2 (ve de la F1)
000032 8694           00067     BSF TRISC,3,0   ; Entrada - Note_3 (ve de la F1)
000034 8894           00068     BSF TRISC,4,0   ; Entrada - Duration_0 (ve de la F1)
000036 8A94           00069     BSF TRISC,5,0   ; Entrada - Duration_1 (ve de la F1)
000038 9C94           00070     BCF TRISC,6,0   ; Sortida - ACK (va cap a la F1)
00003A 9E94           00071     BCF TRISC,7,0   ; Sortida - Speaker
                      00072     
                      00073     ;PORT D
00003C 6A95           00074     CLRF TRISD,0    ; Sortida - CurrentNote[7..0] (Seven segments)
                      00075     
00003E 0012           00076     RETURN
                      00077     
                      00078 ;******************
                      00079 ;INICIALITZAR PORTS  
                      00080 ;******************
000040                00081 INIT_PORTS         ; Init sortides dels ports
000040 6A89           00082     CLRF LATA,0    ; Netejem sortides PORTA (TOT SORTIDES)
000042 9C8B           00083     BCF LATC,6,0   ; Netejem el ACK
000044 9E8B           00084     BCF LATC,7,0   ; Netejem el PWM Speaker
000046 6A8C           00085     CLRF LATD,0    ; Netejem Seven Segments (CurrentNote[7..0])
                      00086     
000048 0012           00087     RETURN
                      00088 
                      00089 ;***********************
                      00090 ;INICIALITZAR VARIABLES 
                      00091 ;***********************
00004A                00092 INIT_VARS
00004A 9001           00093     BCF FLAGS, 0, 0 ;Posem a 0 el bit 0 de la variable Flags -> Indica quan el joc ha començat (START GA
                            ME ES ACTIU)
00004C 9201           00094     BCF FLAGS, 1, 0 ;Posem a 0 el bit 1 de la variable Flags -> Indica que s'han de comptar 3 segons
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00004E 9401           00095     BCF FLAGS, 2, 0 ;Posem a 0 el bit 2 de la variable Flags -> Indica quan s'ha de fer algo amb el serv
                            o
000050 9601           00096     BCF FLAGS, 3, 0 ;Posem a 0 el bit 3 de la variable Flags -> Indica quan s'ha de fer algo amb l'altav
                            eu
000052 9801           00097     BCF FLAGS, 4, 0 ;Posem a 0 el bit 4 de la variable Flags -> Indica quan s'han de comptar 500ms
000054 9A01           00098     BCF FLAGS, 5, 0 ;Posem a 0 el bit 5 de la variable Flags -> Indica quan s'ha de comptar 1 segon
000056 9C01           00099     BCF FLAGS, 6, 0 ;Posem a 0 el bit 6 de la variable Flags -> Indica quan s'han de comptar 2 segons
                      00100 
000058 6A02           00101     CLRF NUM_NOTES
00005A 6A03           00102     CLRF LECTURA 
00005C 6A04           00103     CLRF COMPT_ESPERA_ACK 
00005E 6A05           00104     CLRF NOTA_LLEGIDA 
000060 6A06           00105     CLRF DURATION_LLEGIDA 
000062 6A0A           00106     CLRF COMPTADOR_500MS_L
000064 6A0B           00107     CLRF COMPTADOR_500MS_H 
000066 6A10           00108     CLRF COMPTADOR_1S_L
000068 6A0F           00109     CLRF COMPTADOR_1S_H 
00006A 6A0E           00110     CLRF COMPTADOR_2S_L
00006C 6A0D           00111     CLRF COMPTADOR_2S_H 
00006E 6A07           00112     CLRF COMPTADOR_3S_L
000070 6A08           00113     CLRF COMPTADOR_3S_H 
000072 9009           00114     BCF FLAGS_INT, 0, 0 ;Posem a 0 el bit 0 de la variable Flags_Int -> Indica quan s'han comptat els 3 
                            segons    
000074 9209           00115     BCF FLAGS_INT, 1, 0 ;Posem a 0 el bit 1 de la variable Flags_Int -> Indica quan s'ha comptat 1 segon
                            s
000076 9409           00116     BCF FLAGS_INT, 2, 0 ;Posem a 0 el bit 2 de la variable Flags_Int -> Indica quan s'han comptat els 2 
                            segons
000078 9609           00117     BCF FLAGS_INT, 3, 0 ;Posem a 0 el bit 3 de la variable Flags_Int -> Indica quan s'han comptat els 50
                            0 milisegons
                      00118 
00007A 6883           00119     SETF PORTD ;Netejem tot el port D per no encende el display 7-segments
00007C 0012           00120     RETURN
                      00121 
                      00122 ;****************************
                      00123 ;CONFIGURACIÓ D'INTERRUPCIONS  
                      00124 ;****************************
00007E                00125 CONFIG_INTERRUPTS
                      00126     ; Activar Interrupcions
00007E 8EF2           00127     BSF INTCON,7,0   ; Unmasked
000080 8CF2           00128     BSF INTCON,6,0   ;High
                      00129     ; Activo interrupció RB0 i indico que es per flanc de baixada (NewNote)
000082 88F2           00130     BSF INTCON, INT0IE,0    ; Activo interrupció RB0
000084 9CF1           00131     BCF INTCON2, INTEDG0,0  ; Indico flanc de baixada
                      00132     ;Activo interrupció RBI (StartGame)
000086 86F0           00133     BSF INTCON3, INT1IE, 0  ; Activo interrupció RB1
                      00134     ;Activo interrupció TMR0
000088 8AF2           00135     BSF INTCON, TMR0IE, 0   ; Activo interrupció TMR0
                      00136     
00008A 0012           00137     RETURN
                      00138     
                      00139 ;*****************
                      00140 ;INICIALITZAR RAM
                      00141 ;*****************
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00008C                00142 PUNTER_RAM
00008C 0E01           00143     MOVLW .1
00008E 6EEA           00144     MOVWF FSR0H,0   ; Inicialitzar al banc 1 el punter d'escriptura de la RAM
000090 6AE9           00145     CLRF FSR0L,0    ; Inicialitzar el punter a l'adreça 0
000092 0E01           00146     MOVLW .1
000094 6EE2           00147     MOVWF FSR1H,0   ; Incialitzar al banc 1 el punter de lectura de la RAM
000096 6AE1           00148     CLRF FSR1L,0    ; Inicialitzar el punter a l'adreça 0
                      00149     
000098 0012           00150     RETURN
                      00151 
                      00152 ;**************************
                      00153 ;CARREGAR EL VALOR DE TMR0
                      00154 ;**************************
00009A                00155 CARREGA_TMR0
                      00156     
00009A 0EEC           00157     MOVLW HIGH(.60536) ;Primer carreguem High
00009C 6ED7           00158     MOVWF TMR0H, 0
00009E 0E78           00159     MOVLW LOW(.60536) ;Despres carreguem low
0000A0 6ED6           00160     MOVWF TMR0L, 0
0000A2 0012           00161     RETURN
                      00162     
                      00163 ;*****************
                      00164 ;INICIALITZAR TMR0
                      00165 ;*****************
0000A4                00166 INIT_TMR0
                      00167     ;Tint=(4/Fosc)Preescarler(2^Bits - L)
                      00168     ;500us=(4/40M) * 256 * (2^16 - L) = 65516,46875
                      00169     ;Preescaler=246, Bits=16
                      00170     
                      00171     ;500us=(4/40M) * 1 * (2^16 - L) -> L = 60536
0000A4 0E88           00172     MOVLW b'10001000'
                      00173     ;Bit 7: Enables TMR0
                      00174     ;Bit 6: Timer 8/16 bit
                      00175     ;Bit 5: CLKO
                      00176     ;Bit 4: High-To-Low
                      00177     ;Bit 3: Not preescaler output
                      00178     ;Bit 2-0: Prescale value
0000A6 6ED5           00179     MOVWF T0CON, 0
0000A8 0012           00180     RETURN
                      00181 
                      00182 ;****************
                      00183 ;ACCIO DEL TMR0
                      00184 ;****************
0000AA                00185 ACTION_TMR0
                      00186 
0000AA 94F2           00187     BCF INTCON, TMR0IF, 0 ;Netejem el flag
0000AC EC?? F???      00188     CALL CARREGA_TMR0 ;Carreguem el valor del tmr0 de nou
                      00189 
0000B0 B201           00190     BTFSC FLAGS, 1, 0 ;Mirem el Flag de comptar 3 segons
0000B2 EC?? F???      00191     CALL COMPTAR_3S
                      00192 
0000B6 B401           00193     BTFSC FLAGS, 2, 0 ;Mirem el Flag d'activar el servo
0000B8 EC?? F???      00194     CALL SERVO
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00195     
0000BC B601           00196     BTFSC FLAGS, 3, 0 ;Mirem el Flag d'activar l'altaveu
0000BE EC?? F???      00197     CALL ALTAVEU
                      00198     
0000C2 B801           00199     BTFSC FLAGS, 4, 0 ;Mirem el Flag de comptar 500ms
0000C4 EC?? F???      00200     CALL COMPTAR_500MS
                      00201 
0000C8 BA01           00202     BTFSC FLAGS, 5, 0 ;Mirem el Flag de comptar 1 segon
0000CA EC?? F???      00203     CALL COMPTAR_3S
                      00204     
0000CE BC01           00205     BTFSC FLAGS, 6, 0 ;Mirem el Flag de comptar 2 segons
0000D0 EC?? F???      00206     CALL COMPTAR_3S
                      00207     
0000D4 0012           00208     RETURN
                      00209 
                      00210 ;****************
                      00211 ;SERVOMOTOR
                      00212 ;****************
0000D6                00213 SERVO
0000D6 9401           00214     BCF FLAGS, 2, 0 ;Posem a 0 el bit 2 de la variable Flags, que indica que s'ha d'activar el servo
0000D8 0012           00215     RETURN
                      00216 ;****************
                      00217 ;ESPERA PER L'ACK
                      00218 ;****************
0000DA                00219 ALTAVEU
0000DA 9601           00220     BCF FLAGS, 3, 0 ;Posem a 0 el bit 3 de la variable Flags, que indica que s'ha d'activar l'altaveu
0000DC 0012           00221     RETURN
                      00222 
                      00223 ;****************
                      00224 ;ESPERA PER L'ACK
                      00225 ;****************
0000DE                00226 ESPERA_ACK ;Espera 2ms
                      00227     ;Tosc = 1 / 40M = 25ns
                      00228     ;Cicle màquina = 4*Tosc = 4*25ns = 100ns
                      00229     ;Cicles=2m/100ns=20000
0000DE 0EFF           00230     MOVLW .255 ;1CICLE (De moment poso 255)
0000E0 6E04           00231     MOVWF COMPT_ESPERA_ACK, 0 ;1CICLE
0000E2                00232 LOOP_ESPERA_ACK ;20000 - 4 = 19996
                      00233     ;3x = 19996 -> x=6665,3
                      00234     ;3x=19995 -> 6665 (+ 1 NOPs)
0000E2 2E04           00235     DECFSZ COMPT_ESPERA_ACK, 1, 0 ;3CICLES
0000E4 EF?? F???      00236     GOTO LOOP_ESPERA_ACK ;2CICLES
                      00237 
                      00238     ;Es molt gran, puc fer servir dos comptadors (No se com es faria) o comptar un maxim de 255 cicles (
                            2^8)
                      00239     ;255*100ns=25,5us
                      00240     ;Esperes de 25us per arribar a 2ms -> 2ms/25us = 1000
                      00241 
0000E8 0012           00242     RETURN
                      00243 
                      00244 ;************
                      00245 ;ACTIVAR ACK  
                      00246 ;************
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000EA                00247 ACTIVAR_ACK
0000EA 8C8B           00248     BSF LATC,6,0      ; Activem ACK (RC6)
0000EC EC?? F???      00249     CALL ESPERA_ACK   ; Ens hem d'esperar perquè la fase 1 detecti ACK ;2CICLES
0000F0 9C8B           00250     BCF LATC,6,0      ; Desactivem ACK (RC6)
                      00251     
0000F2 0012           00252     RETURN
                      00253 
                      00254 ;*****************
                      00255 ;GUARDAR NOTA RAM 
                      00256 ;*****************
0000F4                00257 GUARDAR_NOTA_RAM
0000F4 C002 FFE9      00258     MOVFF NUM_NOTES, FSR0L    ;Movem el punter d'escriptura de la RAM per escriure una nota nova -> el b
                            anc sempre és 1
                      00259     ; Màscara per guardar Nota[3..0] : Duration[1..0]
0000F8 CF82 F003      00260     MOVFF PORTC, LECTURA
0000FC 0E3F           00261     MOVLW b'00111111'
0000FE 1403           00262     ANDWF LECTURA,0,0           ; Multipliquem la màscara pel portc i guardem el resultat a w
                      00263     ; Guardem la nota
000100 6EEE           00264     MOVWF POSTINC0,0         ; Escriure RAM (FSR1)
                      00265     
000102 0012           00266     RETURN
                      00267 
                      00268 ;***************
                      00269 ;PROCES NEWNOTE
                      00270 ;***************
000104                00271 NEW_NOTE
000104 92F2           00272     BCF INTCON,INT0IF,0   ; Netejem el flag de la interrupció
                      00273     ;Guardar la nota a la RAM
000106 EC?? F???      00274     CALL GUARDAR_NOTA_RAM
                      00275     ;Incrementar num notes
00010A 2A02           00276     INCF NUM_NOTES,1,0
                      00277     ;Activar ACK
00010C EC?? F???      00278     CALL ACTIVAR_ACK
                      00279     
000110 0012           00280     RETURN
                      00281 
                      00282 ;*********************************
                      00283 ;CONTROLAR INTERRUPCIÓ START GAME 
                      00284 ;*********************************
000112                00285 ACTIVAR_START_GAME
000112 90F0           00286     BCF INTCON3, INT1IF,0   ; Netejar flanc d'interrupció
000114 8001           00287     BSF FLAGS,0,0      ; Activem flag per començar el joc (FLAG<0>=Start Game)
                      00288     
000116 0012           00289     RETURN
                      00290 
                      00291 ;******************************
                      00292 ;INTERRUPCIONS D'ALTA PRIORITAT
                      00293 ;******************************
000118                00294 HIGH_RSI
                      00295     ;Comprovem flag TMR0
000118 B4F2           00296     BTFSC INTCON, TMR0IF, 0
00011A EC?? F???      00297     CALL ACTION_TMR0
                      00298     ;Comprovem flag RB0 (NewNote)
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00011E B2F2           00299     BTFSC INTCON, INT0IF, 0
000120 EC?? F???      00300     CALL NEW_NOTE ;Ho posem per interrupció perque va per flanc
                      00301     ;Comprovem flag RB1 (StartGame)
000124 B0F0           00302     BTFSC INTCON3, INT1IF, 0
000126 EC?? F???      00303     CALL ACTIVAR_START_GAME
                      00304     
00012A 0011           00305     RETFIE FAST
                      00306 ;****************************
                      00307 ;MOSTRAR NOTA PEL 7-SEGMENTS
                      00308 ;****************************
00012C                00309 MOSTRAR_NOTA
                      00310         ; Màscara per agafar només la nota
00012C 0E0F           00311         MOVLW b'00001111'
00012E 1605           00312         ANDWF NOTA_LLEGIDA, 1, 0          ; Apliquem la màscara i guardem la nota
                      00313         ; Comprovar quina nota és
000130 0E00           00314         MOVLW b'00000000'          ; Posem un 0 al w
000132 5C05           00315         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
000134 B4D8           00316         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 0
000136 EC?? F???      00317         CALL NOTA_0
                      00318 
00013A 0E01           00319         MOVLW b'00000001'          ; Posem un 1 al w
00013C 5C05           00320         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
00013E B4D8           00321         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 1
000140 EC?? F???      00322         CALL NOTA_1
                      00323 
000144 0E02           00324         MOVLW b'00000010'          ; Posem un 2 al w
000146 5C05           00325         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
000148 B4D8           00326         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 2
00014A EC?? F???      00327         CALL NOTA_2
                      00328 
00014E 0E03           00329         MOVLW b'00000011'          ; Posem un 3 al w
000150 5C05           00330         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
000152 B4D8           00331         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 3
000154 EC?? F???      00332         CALL NOTA_3
                      00333 
000158 0E04           00334         MOVLW b'00000100'          ; Posem un 4 al w
00015A 5C05           00335         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
00015C B4D8           00336         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 4
00015E EC?? F???      00337         CALL NOTA_4
                      00338 
000162 0E05           00339         MOVLW b'00000101'          ; Posem un 5 al w
000164 5C05           00340         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
000166 B4D8           00341         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 5
000168 EC?? F???      00342         CALL NOTA_5
                      00343 
00016C 0E06           00344         MOVLW b'00000110'          ; Posem un 6 al w
00016E 5C05           00345         SUBWF NOTA_LLEGIDA, 0      ; Restem per comparar
000170 B4D8           00346         BTFSC STATUS, Z, 0         ; Si STATUS = 0 -> SALTA; Si STATUS = 1 -> NOTA_LLEGIDA = 6
000172 EC?? F???      00347         CALL NOTA_6
                      00348         
000176 0012           00349         RETURN
                      00350         
                      00351 ;**************************
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00352 ;MOSTRAR DURACIÓ PELS LEDS
                      00353 ;**************************
000178                00354 MOSTRAR_LEDS
                      00355         ; Apliquem màscara per quedar-nos amb la duració
000178 0E30           00356         MOVLW b'00110000'                  ; Màscara
00017A 1606           00357         ANDWF DURATION_LLEGIDA, 1, 0       ; Apliquem màscara i guardem a la mateixa variable
                      00358         
00017C 4206           00359         RRNCF DURATION_LLEGIDA, 1, 0
00017E 4206           00360         RRNCF DURATION_LLEGIDA, 1, 0
000180 4206           00361         RRNCF DURATION_LLEGIDA, 1, 0
000182 4206           00362         RRNCF DURATION_LLEGIDA, 1, 0
                      00363 
                      00364         ; Comprovo els valors del led
000184 0E01           00365         MOVLW .1                      ; Comprovem si és 1
000186 5C06           00366         SUBWF DURATION_LLEGIDA, 0, 0             ; Restem la nota llegida i el w (comparar)
000188 B4D8           00367         BTFSC STATUS, Z, 0             ; si és igual -> STATUS = 1
00018A EC?? F???      00368         CALL LED_1
                      00369         
00018E 0E02           00370         MOVLW .2                      ; Comprovem si és 2
000190 5C06           00371         SUBWF DURATION_LLEGIDA, 0, 0             ; Restem la nota llegida i el w (comparar)
000192 B4D8           00372         BTFSC STATUS, Z, 0             ; si és igual -> STATUS = 1
000194 EC?? F???      00373         CALL LED_2
                      00374         
000198 0E03           00375         MOVLW .3                      ; Comprovem si és 3
00019A 5C06           00376         SUBWF DURATION_LLEGIDA, 0, 0             ; Restem la nota llegida i el w (comparar)
00019C B4D8           00377         BTFSC STATUS, Z, 0             ; si és igual -> STATUS = 1
00019E EC?? F???      00378         CALL LED_3
                      00379         
0001A2 0012           00380         RETURN
                      00381         
                      00382 ;******************
                      00383 ;NOTES (7-SEGMENTS)
                      00384 ;******************
                      00385 ; El 7-segments funciona per lògica negativa
0001A4                00386 NOTA_0
0001A4 0E82           00387         MOVLW b'10000010'              ; Combinació per mostrar un 0 pel 7-seg
0001A6 6E8C           00388         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001A8 0012           00389         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00390         
0001AA                00391 NOTA_1
0001AA 0ECF           00392         MOVLW b'11001111'              ; Combinació per mostrar un 1 pel 7-seg
0001AC 6E8C           00393         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001AE 0012           00394         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00395         
0001B0                00396 NOTA_2
0001B0 0E91           00397         MOVLW b'10010001'              ; Combinació per mostrar un 2 pel 7-seg
0001B2 6E8C           00398         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001B4 0012           00399         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00400         
0001B6                00401 NOTA_3
0001B6 0E85           00402         MOVLW b'10000101'              ; Combinació per mostrar un 3 pel 7-seg
0001B8 6E8C           00403         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001BA 0012           00404         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00405         
0001BC                00406 NOTA_4
0001BC 0ECC           00407         MOVLW b'11001100'              ; Combinació per mostrar un 4 pel 7-seg
0001BE 6E8C           00408         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001C0 0012           00409         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00410         
0001C2                00411 NOTA_5
0001C2 0EA4           00412         MOVLW b'10100100'              ; Combinació per mostrar un 5 pel 7-seg
0001C4 6E8C           00413         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001C6 0012           00414         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00415         
0001C8                00416 NOTA_6
0001C8 0EA0           00417         MOVLW b'10100000'              ; Combinació per mostrar un 6 pel 7-seg
0001CA 6E8C           00418         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001CC 0012           00419         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00420         
0001CE                00421 NOTA_7
0001CE 0E8F           00422         MOVLW b'10001111'              ; Combinació per mostrar un 7 pel 7-seg
0001D0 6E8C           00423         MOVWF LATD, 0                  ; Carreguem el valor al port de sortida
0001D2 0012           00424         RETURN                          ; Tornem a l'execució de StartGame per mirar els LEDS
                      00425         
                      00426 ;**************
                      00427 ;DURACIÓ (LEDS)
                      00428 ;**************
0001D4                00429 LED_1
0001D4 8089           00430     BSF LATA, 0, 0         ; Activem length_0
0001D6 9289           00431     BCF LATA, 1, 0         ; Desactivem lenght_1
0001D8 0012           00432     RETURN                  ; Tornem a l'execució de StartGame
                      00433         
0001DA                00434 LED_2
0001DA 9089           00435     BCF LATA, 0, 0         ; Activem length_0
0001DC 8289           00436     BSF LATA, 1, 0         ; Desactivem lenght_1
0001DE 0012           00437     RETURN                  ; Tornem a l'execució de StartGame
                      00438     
0001E0                00439 LED_3
0001E0 8089           00440     BSF LATA, 0, 0         ; Activem length_0
0001E2 8289           00441     BSF LATA, 1, 0         ; Desactivem lenght_1
0001E4 0012           00442     RETURN                  ; Tornem a l'execució de StartGame
                      00443 
                      00444 ;*********************************
                      00445 ;COMPROVAR SI HI HA NOTES A LA RAM  
                      00446 ;*********************************
0001E6                00447 COMPROVAR_NOTES
                      00448         ; Mirem si la variable Num_Notes = 0
0001E6 0E00           00449         MOVLW .0
0001E8 5C02           00450         SUBWF NUM_NOTES,0,0
0001EA B4D8           00451         BTFSC STATUS, Z, 0    ; Si STATUS = 0 -> Saltara; Si Num_Notes = 0 -> STATUS = 1
0001EC EF?? F???      00452         GOTO RAM_BUIDA_END    ; Si la RAM és buida no continuem amb el programa
                      00453         
0001F0 0012           00454         RETURN
                      00455 
                      00456 ;**********************************
                      00457 ;INICIALITZAR COMPTADOR DE 500MS
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00458 ;**********************************
0001F2                00459 INIT_COMPT_500MS
                      00460         ;Interrupcions de 500u per aribar a 500ms -> 500ms/500us = 1000
                      00461         ;2 registres 65535
                      00462         ;1000 d = 0011 1110 1000 b
0001F2 0E03           00463         MOVLW HIGH(.1000)
0001F4 6E0B           00464         MOVWF COMPTADOR_500MS_H, 0
0001F6 0EE8           00465         MOVLW LOW(.1000)
0001F8 6E0A           00466         MOVWF COMPTADOR_500MS_L, 0
                      00467         
0001FA 9409           00468         BCF FLAGS_INT, 2, 0 ;Poso a 0 la variable que indica quan he comptat 2 segons
0001FC 8201           00469         BSF FLAGS, 1, 0 ;FLAGS<1>=Comptar 3 Segons
0001FE 0012           00470         RETURN
                      00471 ;*****************
                      00472 ;COMPTAR 500MS
                      00473 ;*****************
000200                00474 COMPTAR_500MS
000200 9801           00475     BCF FLAGS, 4, 0; Posem a 0 el flag que indica que s'han de comptar els 500ms
000202 060A           00476     DECF COMPTADOR_500MS_L,1,0
000204 B0D8           00477     BTFSC STATUS,C,0
000206 0012           00478     RETURN
000208 060B           00479     DECF COMPTADOR_500MS_H,1,0
00020A B0D8           00480     BTFSC STATUS,C,0
00020C 0012           00481     RETURN
00020E 8609           00482     BSF FLAGS_INT, 3, 0 ;Poso a 1 el bit 1 de la variable Flags_Int, indicant que ja he comptat 500usS
                      00483 
000210 0012           00484     RETURN
                      00485 
                      00486 ;**********************************
                      00487 ;INICIALITZAR COMPTADOR DE 1 SEGON
                      00488 ;**********************************
000212                00489 INIT_COMPT_1S
                      00490         ;Interrupcuins de 500u per arribar a 3s -> 2s/500us = 2000
                      00491         ;2 registres 65535
000212 0E07           00492         MOVLW HIGH(.2000)
000214 6E0F           00493         MOVWF COMPTADOR_1S_H, 0
000216 0ED0           00494         MOVLW LOW(.2000)
000218 6E10           00495         MOVWF COMPTADOR_1S_L, 0
                      00496         
00021A 9209           00497         BCF FLAGS_INT, 1, 0 ;Poso a 0 la variable que indica quan he comptat 2 segons
00021C 8A01           00498         BSF FLAGS, 5, 0 ;FLAGS<5>=Comptar 1 Segon
                      00499     
00021E 0012           00500         RETURN
                      00501         
                      00502 ;*****************
                      00503 ;COMPTAR 1 SEGON
                      00504 ;*****************
000220                00505 COMPTAR_1S   
                      00506         
000220 0610           00507     DECF COMPTADOR_1S_L,1,0
000222 B0D8           00508     BTFSC STATUS,C,0
000224 0012           00509     RETURN
                      00510     
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000226 060F           00511     DECF COMPTADOR_1S_H,1,0
000228 B0D8           00512     BTFSC STATUS,C,0
00022A 0012           00513     RETURN
                      00514     
00022C 8209           00515     BSF FLAGS_INT, 1, 0 ;Poso a 1 el bit 1 de la variable Flags_Int, indicant que ja he comptat 1s
00022E 9A01           00516     BCF FLAGS, 5, 0 ;Poso a 0 el flag de comptar 3 segons
000230 0012           00517     RETURN
                      00518     
                      00519 ;**********************************
                      00520 ;INICIALITZAR COMPTADOR DE 2 SEGONS
                      00521 ;**********************************
000232                00522 INIT_COMPT_2S
                      00523         ;Interrupcuins de 500u per arribar a 3s -> 2s/500us = 4000
                      00524         ;2 registres 65535
000232 0E0F           00525         MOVLW HIGH(.4000)
000234 6E0D           00526         MOVWF COMPTADOR_2S_H, 0
000236 0EA0           00527         MOVLW LOW(.4000)
000238 6E0E           00528         MOVWF COMPTADOR_2S_L, 0
                      00529         
00023A 9409           00530         BCF FLAGS_INT, 2, 0 ;Poso a 0 la variable que indica quan he comptat 2 segons
00023C 8C01           00531         BSF FLAGS, 6, 0 ;FLAGS<6>=Comptar 2 Segons
                      00532     
00023E 0012           00533         RETURN
                      00534         
                      00535 ;*****************
                      00536 ;COMPTAR 2 SEGONS
                      00537 ;*****************
000240                00538 COMPTAR_2S   
                      00539         
000240 060E           00540     DECF COMPTADOR_2S_L,1,0
000242 B0D8           00541     BTFSC STATUS,C,0
000244 0012           00542     RETURN
                      00543     
000246 060D           00544     DECF COMPTADOR_2S_H,1,0
000248 B0D8           00545     BTFSC STATUS,C,0
00024A 0012           00546     RETURN
                      00547     
00024C 8409           00548     BSF FLAGS_INT, 2, 0 ;Poso a 1 el bit 0 de la variable Flags_Int, indicant que ja he comptat 3s
00024E 9C01           00549     BCF FLAGS, 6, 0 ;Poso a 0 el flag de comptar 3 segons
000250 0012           00550     RETURN
                      00551     
                      00552 ;**********************************
                      00553 ;INICIALITZAR COMPTADOR DE 3 SEGONS
                      00554 ;**********************************
000252                00555 INIT_COMPT_3S
                      00556         ;Interrupcuins de 500u per arribar a 3s -> 3s/500us = 6000
                      00557         ;2 registres 65535
                      00558         ;6000 d = 0001 0111 0111 0000 b
000252 0E17           00559         MOVLW HIGH(.6000)
000254 6E08           00560         MOVWF COMPTADOR_3S_H, 0
000256 0E70           00561         MOVLW LOW(.6000)
000258 6E07           00562         MOVWF COMPTADOR_3S_L, 0
                      00563         
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00025A 9009           00564         BCF FLAGS_INT, 0, 0
00025C 8201           00565         BSF FLAGS, 1, 0 ;FLAGS<1>=Comptar 3 Segons
                      00566     
00025E 0012           00567         RETURN
                      00568         
                      00569 ;*****************
                      00570 ;COMPTAR 3 SEGONS
                      00571 ;*****************
000260                00572 COMPTAR_3S   
                      00573         
000260 0607           00574     DECF COMPTADOR_3S_L,1,0
000262 B0D8           00575     BTFSC STATUS,C,0
000264 0012           00576     RETURN
                      00577     
000266 0608           00578     DECF COMPTADOR_3S_H,1,0
000268 B0D8           00579     BTFSC STATUS,C,0
00026A 0012           00580     RETURN
                      00581     
00026C 8009           00582     BSF FLAGS_INT, 0, 0 ;Poso a 1 el bit 0 de la variable Flags_Int, indicant que ja he comptat 3s
00026E 9201           00583     BCF FLAGS, 1, 0 ;Poso a 0 el flag de comptar 3 segons
000270 0012           00584     RETURN
                      00585     
                      00586 ;************************************
                      00587 ;ESPERA PER LA GENERACIÓ DEL TRIGGER
                      00588 ;************************************
000272                00589 ESPERA_GENERAR_TRIGGER
                      00590     ;Tosc = 1 / 40M = 25ns
                      00591     ;Cicle màquina = 4*Tosc = 4*25ns = 100ns
                      00592     ;Cicles= 10us/100ns=100
000272 0E20           00593     MOVLW .32 ;1CICLE
000274 6E0C           00594     MOVWF COMPT_ESPERA_TRIGGER, 0 ;1CICLE
000276                00595 LOOP_ESPERA_TRIGGER ;100 - 4 = 96
                      00596     ;3x = 96 -> X = 32
000276 2E0C           00597     DECFSZ COMPT_ESPERA_TRIGGER, 1, 0 ;3CICLES
000278 EF?? F???      00598     GOTO LOOP_ESPERA_TRIGGER ;2CICLES
00027C 0012           00599     RETURN
                      00600     
                      00601 ;******************************
                      00602 ;GENERAR TRIGGER PER ULTRASONS
                      00603 ;******************************
00027E                00604 GENERAR_TRIGGER
00027E 8489           00605     BSF LATA, 2, 0 ;Activo el bit 2 del port A, on esta conectat el trigger
000280 EC?? F???      00606     CALL ESPERA_GENERAR_TRIGGER ;M'ha d'esperar 10us
000284 9489           00607     BCF LATA, 2, 0
000286 0012           00608     RETURN 
                      00609 
                      00610 ;***********
                      00611 ;START GAME  
                      00612 ;***********
000288                00613 START_GAME
                      00614     ; Posicionem el punter de lectura de la RAM a la primera posició
000288 6AE1           00615     CLRF FSR1L, 0
                      00616     ; Comprovar si hi ha notes
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00028A EC?? F???      00617     CALL COMPROVAR_NOTES
00028E                00618 LOOP_START_GAME
                      00619     ; Llegim la posició
00028E 52E6           00620     MOVF POSTINC1       ; Movem el registre al work
000290 6E05           00621     MOVWF NOTA_LLEGIDA, 0
000292 6E06           00622     MOVWF DURATION_LLEGIDA, 0
                      00623     ; Mostrem la nota al 7-segments
000294 EC?? F???      00624     CALL MOSTRAR_NOTA
                      00625     ; Mostrem la duració als leds
000298 EC?? F???      00626     CALL MOSTRAR_LEDS
                      00627     ;Comptar 3s amb el tmr0 -> Indco amb un flag
                      00628     ;Posar un comptador a 0
                      00629     ;Activar una flag
00029C EC?? F???      00630     CALL INIT_COMPT_3S
0002A0 EC?? F???      00631     CALL ESPERAR_3S
                      00632     
                      00633     ; Comprovar Ultrasons
                      00634     ; Comprovar si hi ha notes per llegir
0002A4 5002           00635     MOVF NUM_NOTES, 0   ; Movem num_notes al w
0002A6 5CE1           00636     SUBWF FSR1L,0       ; Restem el número de notes al punter de lectura de la RAM
0002A8 A4D8           00637     BTFSS STATUS, Z, 0   ; Comprovem -> STATUS = 1 : Són iguals -> Si son iguals vol dir que s'ha acabat
0002AA EF?? F???      00638     GOTO LOOP_START_GAME
                      00639 
0002AE                00640 RAM_BUIDA_END
0002AE EF?? F???      00641     GOTO RAM_BUIDA_END
                      00642         
0002B2 0012           00643         RETURN
                      00644         
                      00645 ;********************
                      00646 ;COMPTAR 3S
                      00647 ;********************
0002B4                00648 ESPERAR_3S
Warning[207]: Found label after column 1. (LOOP_MOSTRAR_3S)
0002B4                00649     LOOP_MOSTRAR_3S
0002B4 A009           00650         BTFSS FLAGS_INT, 0, 0 ;Miro el flag que genera la meva interrupció
0002B6 EF?? F???      00651         GOTO LOOP_MOSTRAR_3S
0002BA 9009           00652     BCF FLAGS_INT, 0, 0 ;Poso a 0 el flag per poder tornar a comptar
0002BC 0012           00653         RETURN
                      00654 ;********************
                      00655 ;MAIN 
                      00656 ;********************
0002BE                00657 MAIN
0002BE EC?? F???      00658     CALL CONFIG_PORTS   ; CONFIGURAR ELS VO PORTS
0002C2 EC?? F???      00659     CALL INIT_PORTS     ; INICIALITZAR O PORTS
0002C6 EC?? F???      00660     CALL INIT_VARS      ; INICIALITZAR VARIABLES
0002CA EC?? F???      00661     CALL CONFIG_INTERRUPTS    ; CONFIGURAR INTERRUCIONS
0002CE EC?? F???      00662     CALL PUNTER_RAM     ; INICIALITZEM ELS PUNTERS DE LA RAM
0002D2 EC?? F???      00663     CALL INIT_TMR0      ; INICIALITZEM EL TMR0 PER INTERRUMPIR
0002D6 EC?? F???      00664     CALL CARREGA_TMR0   ; CARREGA EL TMR0 PER GENERAR LA INTERRUPCIÓ
0002DA                00665 LOOP
                      00666                     ; FEM NEWNOTE PER INTERRUPCIONS -> INT0IE
                      00667                     ;FEM STARTGAME PER INTERRUPCIÓ -> INT1IE
0002DA B001           00668     BTFSC FLAGS,0,0     ; MIREM EL BIT 0 DEL REGISTRE QUE INDICA QUE START GAME ES ACTIU
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0002DC EC?? F???      00669     CALL START_GAME
                      00670 
                      00671 
                      00672     END
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

A                                 00000000
ABDEN                             00000000
ABDOVF                            00000007
ACCESS                            00000000
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ACTION_TMR0                       000000AA
ACTIVAR_ACK                       000000EA
ACTIVAR_START_GAME                00000112
ADCON0                            00000FC2
ADCON1                            00000FC1
ADCON2                            00000FC0
ADCS0                             00000000
ADCS1                             00000001
ADCS2                             00000002
ADDEN                             00000003
ADEN                              00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADIP                              00000006
ADMSK1                            00000001
ADMSK2                            00000002
ADMSK3                            00000003
ADMSK4                            00000004
ADMSK5                            00000005
ADON                              00000000
ADRES                             00000FC3
ADRESH                            00000FC4
ADRESL                            00000FC3
ALTAVEU                           000000DA
AN0                               00000000
AN1                               00000001
AN10                              00000001
AN11                              00000004
AN12                              00000000
AN2                               00000002
AN3                               00000003
AN4                               00000005
AN5                               00000000
AN6                               00000001
AN7                               00000002
AN8                               00000002
AN9                               00000003
BANKED                            00000001
BAUDCON                           00000FB8
BAUDCTL                           00000FB8
BCLIE                             00000003
BCLIF                             00000003
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

BCLIP                             00000003
BF                                00000000
BGST                              00000005
BOR                               00000000
BRG16                             00000003
BRGH                              00000002
BSR                               00000FE0
C                                 00000000
C1INV                             00000004
C1N                               00000000
C1OUT_CMCON                       00000006
C1OUT_PORTA                       00000004
C1P                               00000003
C2INV                             00000005
C2N                               00000001
C2OUT_CMCON                       00000007
C2OUT_PORTA                       00000005
C2P                               00000002
CARREGA_TMR0                      0000009A
CCP1                              00000002
CCP1CON                           00000FBD
CCP1IE                            00000002
CCP1IF                            00000002
CCP1IP                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           00000FBA
CCP2IE                            00000000
CCP2IF                            00000000
CCP2IP                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCP2_PORTB                        00000003
CCP2_PORTC                        00000001
CCPR1                             00000FBE
CCPR1H                            00000FBF
CCPR1L                            00000FBE
CCPR2                             00000FBB
CCPR2H                            00000FBC
CCPR2L                            00000FBB
CFGS                              00000006
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CHS3                              00000005
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

CIS                               00000003
CK                                00000006
CKE                               00000006
CKP                               00000004
CLKI                              00000007
CLKO                              00000006
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000FB4
CMIE                              00000006
CMIF                              00000006
CMIP                              00000006
COMPROVAR_NOTES                   000001E6
COMPTADOR_1S_H                    0000000F
COMPTADOR_1S_L                    00000010
COMPTADOR_2S_H                    0000000D
COMPTADOR_2S_L                    0000000E
COMPTADOR_3S_H                    00000008
COMPTADOR_3S_L                    00000007
COMPTADOR_500MS_H                 0000000B
COMPTADOR_500MS_L                 0000000A
COMPTAR_1S                        00000220
COMPTAR_2S                        00000240
COMPTAR_3S                        00000260
COMPTAR_500MS                     00000200
COMPT_ESPERA_ACK                  00000004
COMPT_ESPERA_TRIGGER              0000000C
CONFIG_INTERRUPTS                 0000007E
CONFIG_PORTS                      0000001A
CREN                              00000004
CS                                00000002
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            00000FB5
CVREF                             00000002
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
CVRSS                             00000004
D                                 00000005
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DC2B0                             00000004
DC2B1                             00000005
DDRA                              TRISA
DDRB                              TRISB
DDRC                              TRISC
DDRD                              TRISD
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

DDRE                              TRISE
DONE                              00000001
DURATION_LLEGIDA                  00000006
D_A                               00000005
D_NOT_A                           00000005
ECCP1AS                           00000FB6
ECCP1CON                          00000FBD
ECCP1DEL                          00000FB7
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
EEADR                             00000FA9
EECON1                            00000FA6
EECON2                            00000FA7
EEDATA                            00000FA8
EEIE                              00000004
EEIF                              00000004
EEIP                              00000004
EEPGD                             00000007
ESPERAR_3S                        000002B4
ESPERA_ACK                        000000DE
ESPERA_GENERAR_TRIGGER            00000272
FAST                              00000001
FERR                              00000002
FLAGS                             00000001
FLAGS_INT                         00000009
FLT0                              00000000
FLTS                              00000002
FREE                              00000004
FSR0                              00000000
FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1                              00000001
FSR1H                             00000FE2
FSR1L                             00000FE1
FSR2                              00000002
FSR2H                             00000FDA
FSR2L                             00000FD9
GCEN                              00000007
GENERAR_TRIGGER                   0000027E
GIE                               00000007
GIEH                              00000007
GIEL                              00000006
GIE_GIEH                          00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
GUARDAR_NOTA_RAM                  000000F4
HIGH_RSI                          00000118
HLVDCON                           00000FD2
HLVDEN                            00000004
HLVDIE                            00000002
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

HLVDIF                            00000002
HLVDIN                            00000005
HLVDIP                            00000002
HLVDL0                            00000000
HLVDL1                            00000001
HLVDL2                            00000002
HLVDL3                            00000003
IBF                               00000007
IBOV                              00000005
IDLEN                             00000007
INDF0                             00000FEF
INDF1                             00000FE7
INDF2                             00000FDF
INIT_COMPT_1S                     00000212
INIT_COMPT_2S                     00000232
INIT_COMPT_3S                     00000252
INIT_COMPT_500MS                  000001F2
INIT_PORTS                        00000040
INIT_TMR0                         000000A4
INIT_VARS                         0000004A
INT0                              00000000
INT0E                             00000004
INT0F                             00000001
INT0IE                            00000004
INT0IF                            00000001
INT1                              00000001
INT1E                             00000003
INT1F                             00000000
INT1IE                            00000003
INT1IF                            00000000
INT1IP                            00000006
INT1P                             00000006
INT2                              00000002
INT2E                             00000004
INT2F                             00000001
INT2IE                            00000004
INT2IF                            00000001
INT2IP                            00000007
INT2P                             00000007
INTCON                            00000FF2
INTCON2                           00000FF1
INTCON3                           00000FF0
INTEDG0                           00000006
INTEDG1                           00000005
INTEDG2                           00000004
INTSRC                            00000007
IOFS                              00000002
IPEN                              00000007
IPR1                              00000F9F
IPR2                              00000FA2
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

IRVST                             00000005
KBI0                              00000004
KBI1                              00000005
KBI2                              00000006
KBI3                              00000007
LATA                              00000F89
LATA0                             00000000
LATA1                             00000001
LATA2                             00000002
LATA3                             00000003
LATA4                             00000004
LATA5                             00000005
LATA6                             00000006
LATA7                             00000007
LATB                              00000F8A
LATB0                             00000000
LATB1                             00000001
LATB2                             00000002
LATB3                             00000003
LATB4                             00000004
LATB5                             00000005
LATB6                             00000006
LATB7                             00000007
LATC                              00000F8B
LATC0                             00000000
LATC1                             00000001
LATC2                             00000002
LATC3                             00000003
LATC4                             00000004
LATC5                             00000005
LATC6                             00000006
LATC7                             00000007
LATD                              00000F8C
LATD0                             00000000
LATD1                             00000001
LATD2                             00000002
LATD3                             00000003
LATD4                             00000004
LATD5                             00000005
LATD6                             00000006
LATD7                             00000007
LATE                              00000F8D
LATE0                             00000000
LATE1                             00000001
LATE2                             00000002
LECTURA                           00000003
LED_1                             000001D4
LED_2                             000001DA
LED_3                             000001E0
LOOP                              000002DA
LOOP_ESPERA_ACK                   000000E2
LOOP_ESPERA_TRIGGER               00000276
LOOP_MOSTRAR_3S                   000002B4
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

LOOP_START_GAME                   0000028E
LVDCON                            00000FD2
LVDEN                             00000004
LVDIE                             00000002
LVDIF                             00000002
LVDIP                             00000002
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
LVV0                              00000000
LVV1                              00000001
LVV2                              00000002
LVV3                              00000003
MAIN                              000002BE
MCLR                              00000003
MOSTRAR_LEDS                      00000178
MOSTRAR_NOTA                      0000012C
N                                 00000004
NEW_NOTE                          00000104
NOTA_0                            000001A4
NOTA_1                            000001AA
NOTA_2                            000001B0
NOTA_3                            000001B6
NOTA_4                            000001BC
NOTA_5                            000001C2
NOTA_6                            000001C8
NOTA_7                            000001CE
NOTA_LLEGIDA                      00000005
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BOR                           00000000
NOT_CS                            00000002
NOT_DONE                          00000001
NOT_MCLR                          00000003
NOT_PD                            00000002
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RD                            00000000
NOT_RI                            00000004
NOT_SS                            00000005
NOT_T1SYNC                        00000002
NOT_T3SYNC                        00000002
NOT_TO                            00000003
NOT_W                             00000002
NOT_WR                            00000001
NOT_WRITE                         00000002
NUM_NOTES                         00000002
OBF                               00000006
OERR                              00000001
OSC1                              00000007
OSC2                              00000006
OSCCON                            00000FD3
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

OSCFIE                            00000007
OSCFIF                            00000007
OSCFIP                            00000007
OSCTUNE                           00000F9B
OSTS                              00000003
OV                                00000003
P                                 00000004
P1A                               00000002
P1B                               00000005
P1C                               00000006
P1D                               00000007
P1M0                              00000006
P1M1                              00000007
PC                                00000FF9
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000FF9
PCLATH                            00000FFA
PCLATU                            00000FFB
PD                                00000002
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PEIE_GIEL                         00000006
PEN                               00000002
PGC                               00000006
PGD                               00000007
PGM                               00000005
PIE1                              00000F9D
PIE2                              00000FA0
PIR1                              00000F9E
PIR2                              00000FA1
PLLEN                             00000006
PLUSW0                            00000FEB
PLUSW1                            00000FE3
PLUSW2                            00000FDB
POR                               00000001
PORTA                             00000F80
PORTB                             00000F81
PORTC                             00000F82
PORTD                             00000F83
PORTE                             00000F84
POSTDEC0                          00000FED
POSTDEC1                          00000FE5
POSTDEC2                          00000FDD
POSTINC0                          00000FEE
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

POSTINC1                          00000FE6
POSTINC2                          00000FDE
PR2                               00000FCB
PREINC0                           00000FEC
PREINC1                           00000FE4
PREINC2                           00000FDC
PROD                              00000FF3
PRODH                             00000FF4
PRODL                             00000FF3
PRSEN                             00000007
PSA                               00000003
PSP0                              00000000
PSP1                              00000001
PSP2                              00000002
PSP3                              00000003
PSP4                              00000004
PSP5                              00000005
PSP6                              00000006
PSP7                              00000007
PSPIE                             00000007
PSPIF                             00000007
PSPIP                             00000007
PSPMODE                           00000004
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PUNTER_RAM                        0000008C
PWM1CON                           00000FB7
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RAM_BUIDA_END                     000002AE
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RBIP                              00000000
RBPU                              00000007
RC0                               00000000
RC1                               00000001
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RCEN                              00000003
RCIDL                             00000006
RCIE                              00000005
RCIF                              00000005
RCIP                              00000005
RCMT                              00000006
RCON                              00000FD0
RCREG                             00000FAE
RCSTA                             00000FAB
RD                                00000000
RD0                               00000000
RD1                               00000001
RD16                              00000007
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
RI                                00000004
RSEN                              00000001
RX                                00000007
RX9                               00000006
RX9D                              00000000
RXDTP                             00000005
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SBOREN                            00000006
SCK                               00000003
SCKP                              00000004
SCL                               00000003
SCS0                              00000000
SCS1                              00000001
SDA                               00000004
SDI                               00000004
SDO                               00000005
SEN                               00000000
SENDB                             00000003
SERVO                             000000D6
SMP                               00000007
SP0                               00000000
SP1                               00000001
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

SP2                               00000002
SP3                               00000003
SP4                               00000004
SPBRG                             00000FAF
SPBRGH                            00000FB0
SPEN                              00000007
SREN                              00000005
SSPADD                            00000FC8
SSPBUF                            00000FC9
SSPCON1                           00000FC6
SSPCON2                           00000FC5
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPIP                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000FC7
START_GAME                        00000288
STATUS                            00000FD8
STKFUL                            00000007
STKOVF                            00000007
STKPTR                            00000FFC
STKUNF                            00000006
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
T016BIT                           00000006
T08BIT                            00000006
T0CKI                             00000004
T0CON                             00000FD5
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0PS0                             00000000
T0PS1                             00000001
T0PS2                             00000002
T0SE                              00000004
T13CKI                            00000000
T1CKI                             00000000
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000FCD
T1OSCEN                           00000003
T1OSI                             00000001
T1OSO                             00000000
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

T2CON                             00000FCA
T2OUTPS0                          00000003
T2OUTPS1                          00000004
T2OUTPS2                          00000005
T2OUTPS3                          00000006
T3CCP1                            00000003
T3CCP2                            00000006
T3CKPS0                           00000004
T3CKPS1                           00000005
T3CON                             00000FB1
T3SYNC                            00000002
TABLAT                            00000FF5
TBLPTR                            00000FF6
TBLPTRH                           00000FF7
TBLPTRL                           00000FF6
TBLPTRU                           00000FF8
TMR0                              00000FD6
TMR0H                             00000FD7
TMR0IE                            00000005
TMR0IF                            00000002
TMR0IP                            00000002
TMR0L                             00000FD6
TMR0ON                            00000007
TMR1                              00000FCE
TMR1CS                            00000001
TMR1H                             00000FCF
TMR1IE                            00000000
TMR1IF                            00000000
TMR1IP                            00000000
TMR1L                             00000FCE
TMR1ON                            00000000
TMR2                              00000FCC
TMR2IE                            00000001
TMR2IF                            00000001
TMR2IP                            00000001
TMR2ON                            00000002
TMR3                              00000FB2
TMR3CS                            00000001
TMR3H                             00000FB3
TMR3IE                            00000001
TMR3IF                            00000001
TMR3IP                            00000001
TMR3L                             00000FB2
TMR3ON                            00000000
TO                                00000003
TOS                               00000FFD
TOSH                              00000FFE
TOSL                              00000FFD
TOSU                              00000FFF
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

TRISA                             00000F92
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000F93
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000F94
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000F95
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000F96
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TX                                00000006
TX9                               00000006
TX9D                              00000000
TXCKP                             00000004
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

TXIP                              00000004
TXREG                             00000FAD
TXSTA                             00000FAC
UA                                00000001
VCFG0                             00000004
VCFG1                             00000005
VDIRMAG                           00000007
VPP                               00000003
VREFM                             00000002
VREFP                             00000003
W                                 00000000
WCOL                              00000007
WDTCON                            00000FD1
WR                                00000001
WREG                              00000FE8
WREN                              00000002
WRERR                             00000003
WUE                               00000001
Z                                 00000002
_BBSIZ_BB1K_4L                    000000FF
_BBSIZ_BB256_4L                   000000CF
_BBSIZ_BB512_4L                   000000DF
_BORV_0_2L                        000000E7
_BORV_1_2L                        000000EF
_BORV_2_2L                        000000F7
_BORV_3_2L                        000000FF
_BOR_NOSLP_2L                     000000FD
_BOR_OFF_2L                       000000F9
_BOR_ON_2L                        000000FF
_BOR_SOFT_2L                      000000FB
_CCP2MX_RB3_3H                    000000FE
_CCP2MX_RC1_3H                    000000FF
_CONFIG1H                         00300001
_CONFIG2H                         00300003
_CONFIG2L                         00300002
_CONFIG3H                         00300005
_CONFIG4L                         00300006
_CONFIG5H                         00300009
_CONFIG5L                         00300008
_CONFIG6H                         0030000B
_CONFIG6L                         0030000A
_CONFIG7H                         0030000D
_CONFIG7L                         0030000C
_CP0_OFF_5L                       000000FF
_CP0_ON_5L                        000000FE
_CP1_OFF_5L                       000000FF
_CP1_ON_5L                        000000FD
_CPB_OFF_5H                       000000FF
_CPB_ON_5H                        000000BF
_CPD_OFF_5H                       000000FF
_CPD_ON_5H                        0000007F
_DEBUG_OFF_4L                     000000FF
_DEBUG_ON_4L                      0000007F
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

_DEVID1                           003FFFFE
_DEVID2                           003FFFFF
_EBTR0_OFF_7L                     000000FF
_EBTR0_ON_7L                      000000FE
_EBTR1_OFF_7L                     000000FF
_EBTR1_ON_7L                      000000FD
_EBTRB_OFF_7H                     000000FF
_EBTRB_ON_7H                      000000BF
_FCMEN_OFF_1H                     000000BF
_FCMEN_ON_1H                      000000FF
_IDLOC0                           00200000
_IDLOC1                           00200001
_IDLOC2                           00200002
_IDLOC3                           00200003
_IDLOC4                           00200004
_IDLOC5                           00200005
_IDLOC6                           00200006
_IDLOC7                           00200007
_IESO_OFF_1H                      0000007F
_IESO_ON_1H                       000000FF
_LPT1OSC_OFF_3H                   000000FB
_LPT1OSC_ON_3H                    000000FF
_LVP_OFF_4L                       000000FB
_LVP_ON_4L                        000000FF
_MCLRE_OFF_3H                     0000007F
_MCLRE_ON_3H                      000000FF
_OSC_ECIO_1H                      000000F5
_OSC_EC_1H                        000000F4
_OSC_HSPLL_1H                     000000F6
_OSC_HS_1H                        000000F2
_OSC_INTIO1_1H                    000000F9
_OSC_INTIO2_1H                    000000F8
_OSC_LP_1H                        000000F0
_OSC_RCIO_1H                      000000F7
_OSC_RC_1H                        000000F3
_OSC_XT_1H                        000000F1
_PBADEN_ANA_3H                    000000FF
_PBADEN_DIG_3H                    000000FD
_PWRT_OFF_2L                      000000FF
_PWRT_ON_2L                       000000FE
_STVREN_OFF_4L                    000000FE
_STVREN_ON_4L                     000000FF
_WDTPS_1024_2H                    000000F5
_WDTPS_128_2H                     000000EF
_WDTPS_16384_2H                   000000FD
_WDTPS_16_2H                      000000E9
_WDTPS_1_2H                       000000E1
_WDTPS_2048_2H                    000000F7
_WDTPS_256_2H                     000000F1
_WDTPS_2_2H                       000000E3
_WDTPS_32768_2H                   000000FF
_WDTPS_32_2H                      000000EB
_WDTPS_4096_2H                    000000F9
MPASM 5.86                         FASE2.ASM   12-16-2024  10:44:11         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

_WDTPS_4_2H                       000000E5
_WDTPS_512_2H                     000000F3
_WDTPS_64_2H                      000000ED
_WDTPS_8192_2H                    000000FB
_WDTPS_8_2H                       000000E7
_WDT_OFF_2H                       000000FE
_WDT_ON_2H                        000000FF
_WRT0_OFF_6L                      000000FF
_WRT0_ON_6L                       000000FE
_WRT1_OFF_6L                      000000FF
_WRT1_ON_6L                       000000FD
_WRTB_OFF_6H                      000000FF
_WRTB_ON_6H                       000000BF
_WRTC_OFF_6H                      000000FF
_WRTC_ON_6H                       000000DF
_WRTD_OFF_6H                      000000FF
_WRTD_ON_6H                       0000007F
_XINST_OFF_4L                     000000BF
_XINST_ON_4L                      000000FF
__18F4321                         00000001

Errors   :     0
Warnings :     2 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

